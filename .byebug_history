exit
Time.now
doctor.appointments.where("starts_at <= :ends_at and ends_at >= :starts_at",{:ends_at => ends_at, :starts_at => starts_at})
exit
doctor_id
doctor
